from typing import Any, Dict

from core.brevio.enums.category import CategoryType
from core.brevio.enums.language import LanguageType
from core.brevio.enums.output_format_type import OutputFormatType
from core.brevio.enums.source_type import SourceType
from core.brevio.enums.style import StyleType


class JapanesePrompts:
    INSTRUCTIONS_TITLE: str = "**指示:**"
    SPECIFIC_LANGUAGE_TITLE: str = "**指定言語:** 日本語"
    SPECIFIC_LANGUAGE: str = "今後、すべての回答は日本語のみで行ってください。"
    EXAMPLE_TITLE: str = "**例**:"

    TEMPLATES: Dict[str, Dict[str, Any]] = {
        "simple_summary": {
            "structures": {"default": ["追加の見出しなしの直接要約"]},
            "styles": {
                "default": {
                    "tone": "中立、文脈に適応",
                    "elements": [],
                    "source_types": [
                        SourceType.PDF,
                        SourceType.DOCX,
                        SourceType.TEXT,
                        SourceType.VIDEO,
                        SourceType.AUDIO,
                    ],
                }
            },
            "rules": [
                "冗長性を排除して簡潔に要約",
                "元のタイトルが存在する場合は、正確な文言とフォーマットを変更せずに保持（例：# タイトル、## サブタイトル）",
                "原文のトーン、意図、暗黙の構造に完全に適応",
                "原文に明示的に存在しない限り、見出しやサブタイトルを追加しない",
                "重要な例や概念は元のフォーマットで保持（リスト、コード、斜体など）",
                "主観的な解釈や不必要な変更を避ける",
                "原文が指定していない限り、単一の連続したテキストブロックを生成",
            ],
            "needs": "簡潔さと原文への忠実性",
        },
        "journalism": {
            "structures": {
                "chronicle": [
                    "# [イベント] ライブ",
                    "- **[MM:SS]** 重要な発言または事実",
                    "- **[MM:SS]** 重要な瞬間または進展の説明",
                    "- **[MM:SS]** イベントへの反応や分析",
                ],
                "news_wire": [
                    "[日付] - [場所] - 簡潔で直接的な要約",
                    "### 主要な詳細",
                    "- [主要事実1]",
                    "- [主要事実2]",
                    "### 背景",
                    "- [背景情報]",
                    "### 統計（該当する場合）",
                    "- [統計1]",
                    "- [統計2]",
                    "### 影響",
                    "- [短期的影響]",
                    "- [長期的影響]",
                ],
                "analysis": [
                    "## [トピック] 詳細分析",
                    "### 概要",
                    "- [トピックの簡単な要約]",
                    "### 主要な側面",
                    "- [側面1]: [詳細な分析]",
                    "- [側面2]: [詳細な分析]",
                    "### 影響",
                    "- [短期的影響]",
                    "- [長期的影響]",
                    "### 専門家の意見",
                    "- [専門家の引用または見解]",
                    "### 結論",
                    "- [主要な発見と将来の展望の要約]",
                ],
            },
            "styles": {
                "chronicle": {
                    "tone": "叙述的、緊急性がある",
                    "elements": ["タイムライン", "重要な瞬間", "反応"],
                    "source_types": [SourceType.VIDEO, SourceType.AUDIO],
                },
                "news_wire": {
                    "tone": "直接的、情報的",
                    "elements": ["主要な詳細", "背景", "統計", "影響"],
                    "source_types": [
                        SourceType.TEXT,
                        SourceType.VIDEO,
                        SourceType.AUDIO,
                    ],
                },
                "analysis": {
                    "tone": "反省的、文脈的",
                    "elements": [
                        "概要",
                        "主要な側面",
                        "影響",
                        "専門家の意見",
                        "結論",
                    ],
                    "source_types": [SourceType.TEXT],
                },
            },
            "rules": [
                "クロニクルには正確なタイムスタンプを含める",
                "該当する場合は出典を引用",
                "ニュース速報では意見を避ける",
                "ニュース速報では主要な詳細を箇条書きで示す",
                "ニュース速報には少なくとも1つの統計またはデータポイントを含める",
                "ニュース速報では短期的および長期的な影響を強調",
                "クロニクルでは重要な瞬間とリアルタイムの反応に焦点",
                "分析では原因、影響、専門家の視点を含めて詳細に検討",
            ],
            "needs": ["ニュース速報の速さ、クロニクルの詳細、分析の文脈"],
        },
        "marketing": {
            "structures": {
                "highlights": [
                    "# ✨ [キャンペーン] - ハイライト",
                    "🎯 **キーポイント:** 価値",
                ],
                "storytelling": [
                    "## [ブランド] - ストーリー: [タイトル]",
                    "### 導入",
                    "- [感情的なフックまたは設定]",
                    "### 主要な物語",
                    "- [重要なイベントまたは転換点]",
                    "- [課題または対立]",
                    "- [解決策または結果]",
                    "### 感情的影響",
                    "- [物語が聴衆に与える感情]",
                    "### 行動喚起",
                    "- [ブランドまたは製品との関わりを促す]",
                ],
                "report": [
                    "## [キャンペーン] - 結果",
                    "### 概要",
                    "- [キャンペーンとその目的の簡単な要約]",
                    "### 主要指標",
                    "| **指標** | **目標** | **実際** | **差異** |",
                    "|------------|----------|------------|--------------|",
                    "| [指標1] | [目標1] | [実際1] | [差異1] |",
                    "| [指標2] | [目標2] | [実際2] | [差異2] |",
                    "### 分析",
                    "- [成功と課題を含む詳細な結果分析]",
                    "### 推奨事項",
                    "- [データに基づく実行可能な推奨事項]",
                    "### 結論",
                    "- [主要な発見と次のステップの要約]",
                ],
            },
            "styles": {
                "highlights": {
                    "tone": "魅力的、視覚的",
                    "elements": ["絵文字", "箇条書き"],
                    "source_types": [
                        SourceType.TEXT,
                        SourceType.VIDEO,
                        SourceType.AUDIO,
                    ],
                },
                "storytelling": {
                    "tone": "感情的、没入型",
                    "elements": ["物語", "感情的なフック", "行動喚起"],
                    "source_types": [SourceType.TEXT],
                },
                "report": {
                    "tone": "分析的、明確",
                    "elements": ["表", "分析", "推奨事項"],
                    "source_types": [SourceType.TEXT],
                },
            },
            "rules": [
                "ハイライトとストーリーテリングには魅力的な言語を使用",
                "レポートにはKPIを含める",
                "過度な専門用語を避ける",
                "ストーリーテリングでは感情的なつながりと物語の流れに焦点",
            ],
            "needs": "視覚的影響、感情的なつながり、実行可能なデータ",
        },
        "health": {
            "structures": {
                "report": [
                    "**[研究/治療] - 臨床レポート:**",
                    "データに基づいた簡潔な技術的な段落で、結果と有効性に焦点",
                ],
                "summary": [
                    "# 🩺 [トピック] - 要約",
                    "📈 **指標:** 結果",
                    "| 週 | 進捗 |",
                ],
                "case": ["**[患者] - 臨床ケース:**", "詳細な説明"],
            },
            "styles": {
                "report": {
                    "tone": "公式、正確かつ証拠に基づく",
                    "elements": ["定量的データ", "臨床結果"],
                    "source_types": [SourceType.TEXT],
                },
                "summary": {
                    "tone": "視覚的、アクセス可能",
                    "elements": ["箇条書き", "表"],
                    "source_types": [SourceType.TEXT, SourceType.VIDEO],
                },
                "case": {
                    "tone": "叙述的、臨床的",
                    "elements": ["説明"],
                    "source_types": [
                        SourceType.TEXT,
                        SourceType.AUDIO,
                        SourceType.VIDEO,
                    ],
                },
            },
            "rules": [
                "利用可能な場合は常に定量的で測定可能なデータを含める",
                "科学的厳密性を維持し、主観的な言語を避ける",
                "対象者に応じて言語の複雑さを調整（医師には技術的、患者には簡略化）",
                "医療情報の明確性、正確性、アクセシビリティを確保",
            ],
            "needs": {
                "doctors": "明確で正確な臨床データによる情報に基づく意思決定",
                "patients": "状態と治療についての理解しやすい説明",
                "researchers": "分析のための堅牢なデータ駆動型情報",
            },
        },
        "technology": {
            "structures": {
                "changelog": [
                    "# [バージョン] - 更新",
                    "✨ **新機能:**",
                    "- 機能",
                    "🐛 **修正:**",
                    "- 修正",
                ],
                "proposal": [
                    "# [プロジェクト] - 技術提案",
                    "## はじめに",
                    "プロジェクト、その目的、解決すべき問題の簡単な説明",
                    "## 目的",
                    "- 目的1: プロジェクトの最初の目的を説明",
                    "- 目的2: プロジェクトの2番目の目的を説明",
                    "## 技術的アプローチ",
                    "使用するツール、フレームワーク、方法論を含む技術的解決策の説明",
                    "### 主な機能",
                    "- 機能1: 最初の主要機能を説明",
                    "- 機能2: 2番目の主要機能を説明",
                    "## 利点",
                    "効率性、拡張性、コスト削減などの提案された解決策の利点を強調",
                    "## 実装計画",
                    "実装のための大まかなタイムラインまたは手順を提供",
                    "## リスクと緩和策",
                    "潜在的なリスクを特定し、緩和策を提案",
                    "## 結論",
                    "提案の価値を要約し、再確認",
                ],
                "diagram": [
                    "# [プロセス] - フロー",
                    "```mermaid",
                    "graph TD",
                    "  A[開始] --> B{決定?}",
                    "  B -->|はい| C[プロセス1]",
                    "  B -->|いいえ| D[プロセス2]",
                    "  C --> E[終了]",
                    "  D --> E",
                    "```",
                    "**注釈:**",
                    "- **A**: プロセスの開始",
                    "- **B**: 決定点",
                    "- **C/D**: 代替パス",
                    "- **E**: プロセスの終了",
                    "**色:**",
                    "- **緑**: 成功パス（例：ログイン済みユーザー）",
                    "- **赤**: 代替パス（例：未ログインユーザー）",
                    "**凡例:**",
                    "- **四角形**: プロセスステップ",
                    "- **菱形**: 決定点",
                    "- **円**: 開始/終了",
                ],
            },
            "styles": {
                "changelog": {
                    "tone": "技術的、簡潔",
                    "elements": ["箇条書き"],
                    "source_types": [SourceType.TEXT, SourceType.PDF, SourceType.DOCX],
                },
                "proposal": {
                    "tone": "説得力があり、明確かつ構造化",
                    "elements": ["見出し", "箇条書き", "表"],
                    "source_types": [SourceType.TEXT, SourceType.PDF, SourceType.DOCX],
                },
                "diagram": {
                    "tone": "視覚的、記述的かつモジュール式",
                    "elements": ["mermaid", "色", "注釈", "凡例"],
                    "source_types": [
                        SourceType.TEXT,
                        SourceType.PDF,
                        SourceType.DOCX,
                        SourceType.VIDEO,
                        SourceType.AUDIO,
                    ],
                },
            },
            "rules": [
                "プロジェクトに関連する特定の技術用語を使用",
                "ステークホルダーを説得するため、提案された解決策の利点を強調",
                "明確で構造化された実装計画を含める",
                "潜在的なリスクと緩和戦略に対処",
                "読みやすさを向上させるため、箇条書きと見出しを使用",
                "提案を裏付ける具体的な例またはケーススタディを提供",
                "提案がモジュール式で簡単に更新できることを確認",
                "提案の価値を要約する結論を含める",
            ],
            "needs": "ステークホルダーの説得、技術的アプローチの明確さ、構造化されたドキュメント、実行可能な洞察",
        },
        "education": {
            "structures": {
                "guide": [
                    "# 📚 [トピック] - ガイド",
                    "## [セクション]",
                    "- **概念:** 実用的な例と応用を含む説明",
                ],
                "quick_ref": [
                    "**[トピック] - クイックリファレンス:**",
                    "- [キーポイント]: 明確な実用的な文脈を含む簡潔で実用的な要約",
                ],
                "timeline": [
                    "# 🎥 [クラス] - タイムライン",
                    "- **[MM:SS]** [主要な概念または実行されたアクション]: [結果またはアクションの簡潔で明確な説明、実際の応用を強調]",
                ],
            },
            "styles": {
                "guide": {
                    "tone": "教育的、構造化、理解を深めるための例付き",
                    "elements": [
                        "サブセクション",
                        "箇条書き",
                        "例",
                        "実際の応用",
                    ],
                    "source_types": [SourceType.TEXT, SourceType.PDF, SourceType.DOCX],
                },
                "quick_ref": {
                    "tone": "簡潔、実用的、迅速な学習と応用のために設計",
                    "elements": ["箇条書き", "明確な要約"],
                    "source_types": [SourceType.TEXT, SourceType.PDF, SourceType.DOCX],
                },
                "timeline": {
                    "tone": "時間順、アクション指向、実際の応用に重点を置いた明確さ",
                    "elements": [
                        "タイムライン",
                        "ステップバイステップのアクション",
                        "視覚的な合図",
                        "実際の文脈",
                    ],
                    "source_types": [SourceType.VIDEO, SourceType.AUDIO],
                },
            },
            "rules": [
                "理解を深めるため、実用的な例を含む明確で実用的な説明を提供",
                "実用的な応用に焦点を当て、情報を簡潔かつ包括的に保つ",
                "学習目標と文脈との整合性を確保",
                "実際の使用例、特に明確さと使いやすさを強調",
            ],
            "needs": "学習の容易さ、迅速な参照、実用的な洞察を伴うビデオ追跡",
        },
        "architecture": {
            "structures": {
                "chronicle": [
                    "# 🏛️ [プロジェクト] - 記録",
                    "- **[MM:SS]** 注目すべき要素",
                ],
                "report": [
                    "**[プロジェクト] - 技術レポート:**",
                    "主要な詳細を含む段落",
                ],
                "list": ["# [プロジェクト] - 詳細", "- **側面:** 説明"],
            },
            "styles": {
                "chronicle": {
                    "tone": "叙述的、視覚的",
                    "elements": ["タイムライン"],
                    "source_types": [SourceType.VIDEO],
                },
                "report": {
                    "tone": "技術的、詳細",
                    "elements": [],
                    "source_types": [SourceType.TEXT],
                },
                "list": {
                    "tone": "説明的、整理された",
                    "elements": ["箇条書き"],
                    "source_types": [SourceType.TEXT],
                },
            },
            "rules": [
                "革新性または持続可能性を強調",
                "該当する場合は技術データを含める",
                "視覚的に魅力的にする",
            ],
            "needs": "技術文書、魅力的なプレゼンテーション、ビデオ追跡",
        },
        "finance": {
            "structures": {
                "report": [
                    "# 💰 [期間] - 財務レポート",
                    "- **指標:** [値]",
                ],
                "table": [
                    "## [期間] - 財務要約",
                    "| **指標** | **値** |",
                ],
                "executive": [
                    "**[期間] - エグゼクティブサマリー:**",
                    "主要な洞察を強調する簡潔で影響力のある段落",
                ],
            },
            "styles": {
                "report": {
                    "tone": "分析的、公式",
                    "elements": ["箇条書き"],
                    "source_types": [
                        SourceType.TEXT,
                        SourceType.PDF,
                        SourceType.DOCX,
                        SourceType.VIDEO,
                        SourceType.AUDIO,
                    ],
                },
                "table": {
                    "tone": "視覚的、簡潔",
                    "elements": ["表"],
                    "source_types": [SourceType.TEXT, SourceType.PDF, SourceType.DOCX],
                },
                "executive": {
                    "tone": "直接的、幹部向け",
                    "elements": [],
                    "source_types": [SourceType.TEXT, SourceType.PDF, SourceType.DOCX],
                },
            },
            "rules": [
                "主要な数値の提示において明確さと簡潔さを確保",
                "データ提示における曖昧さを避ける",
                "実行可能な洞察を提供し意思決定を支援",
                "表のタイトルは二重アスタリスクの前後に余分なスペースを入れずにフォーマット",
            ],
            "needs": "実行可能なデータ、明確な視覚的合成、影響に焦点を当てたエグゼクティブサマリー",
        },
        "tourism": {
            "structures": {
                "chronicle": [
                    "# 🌍 [目的地] - 記録",
                    "- **[MM:SS]** イニシアチブ",
                    "- **[MM:SS]** 主要なマイルストーン",
                ],
                "report": [
                    "**[目的地] - 政策:**",
                    "目的地の目標と観光への影響を強調した公式な段落",
                ],
                "list": [
                    "# [目的地] - イニシアチブ",
                    "- **分野:** 詳細（現地文化や観光名所の追加を検討）",
                ],
            },
            "styles": {
                "chronicle": {
                    "tone": "叙述的、魅力的、没入型",
                    "elements": ["タイムライン", "ストーリーテリング"],
                    "source_types": [SourceType.AUDIO, SourceType.VIDEO],
                },
                "report": {
                    "tone": "公式的、情報的、客観的",
                    "elements": [],
                    "source_types": [SourceType.TEXT],
                },
                "list": {
                    "tone": "説明的、明確、情報的",
                    "elements": ["箇条書き", "簡潔な事実"],
                    "source_types": [SourceType.TEXT],
                },
            },
            "rules": [
                "持続可能性、文化的意義、観光客の魅力を強調",
                "実用的な旅行情報を含める（例：ベストシーズン、現地の観光名所、緊急連絡先）",
                "政策とイニシアチブの明確で簡潔かつ正確な説明に焦点",
                "誇張を避け、現実的で情報的であること",
            ],
            "needs": "情報的なハイライトを含む魅力的なプロモーション、政策の明確な提示、観光客向けの実用的な詳細",
        },
    }

    EXAMPLES = {
        "simple_summary": {"default": "コンテンツは2025年3月8日に発表された減税と融資枠を含む経済対策について説明しています"},
        "journalism": {
            "chronicle": (
                "# Appleイベントライブ\n"
                "- **[00:03:00]** ティム・クックがApple Intelligenceを紹介、Appleデバイスに統合された新しいAIシステム\n"
                "- **[00:05:11]** Apple Watch Series 10の発表、大型ディスプレイと薄型デザインを強調\n"
                "- **[00:07:03]** 新型OLEDディスプレイのデモ、斜め角度で40%明るい\n"
                "- **[00:09:06]** Series 10はSeries 9より10%薄く、厚さわずか9.7mm\n"
                "- **[00:10:19]** 急速充電：30分で80%\n"
                "- **[00:11:03]** 磨かれたチタン仕上げ、ステンレス鋼より20%軽い\n"
                "- **[00:12:00]** 持続可能性に焦点：95%再生チタン、製造過程で100%再生可能エネルギー\n"
                "- **[00:13:50]** 新健康機能：睡眠時無呼吸症候群の検出と排卵追跡のための体温モニタリング\n"
                "- **[00:15:19]** 睡眠時無呼吸症候群の重要性について議論、世界で80%が未診断"
            ),
            "news_wire": (
                "[2025年3月8日] - 首都 - 大統領が経済対策を発表\n"
                "### 主要な詳細\n"
                "- 中流家庭向け減税\n"
                "- インフラプロジェクトへの支出増\n"
                "### 背景\n"
                "- インフレ上昇の中で経済成長を刺激するための対策\n"
                "### 統計\n"
                "- 2025年GDP成長予測：2.5%\n"
                "- 失業率：5.8%（前年6.3%から低下）\n"
                "### 影響\n"
                "- 短期的：中流家庭への即時的な救済\n"
                "- 長期的：経済成長と雇用創出を刺激すると予想"
            ),
            "analysis": (
                "## 税制改革の詳細分析\n"
                "### 概要\n"
                "- 最近の税制改革は中流家庭の税負担を軽減し、インフラ支出を増やすことで経済成長を刺激することを目的\n"
                "### 主要な側面\n"
                "- **減税**：中流家庭の税を10%削減、可処分所得と消費を増加\n"
                "- **インフラ投資**：雇用創出と公共サービスの改善を目的\n"
                "### 影響\n"
                "- **短期的**：中流家庭への即時的な救済、消費と経済活動の潜在的な増加\n"
                "- **長期的**：経済成長の刺激、雇用創出、公共インフラの改善によるより強力な経済\n"
                "### 専門家の意見\n"
                "- ハーバード大学の経済学者ジェーン・ドー博士：'この税制改革は不平等を減らし経済成長を刺激する重要な一歩'\n"
                "### 結論\n"
                "- 税制改革は経済的課題に対処するバランスの取れたアプローチを表すが、長期的な成功は効果的な実施にかかっている"
            ),
        },
        "marketing": {
            "highlights": "# ✨ EcoLifeローンチ - ハイライト\n🎯 **ターゲット:** 若者\n📈 **売上:** +15%",
            "storytelling": (
                "## EcoLife - ストーリー：サステナビリティへの旅\n"
                "### 導入\n"
                "- 活気ある都市で、若い女性マリアは忙しい生活と環境問題に圧倒されていた\n"
                "### 主要な物語\n"
                "- ある日、マリアはサステナブルな生活に専念するブランドEcoLifeを発見し、そのエコフレンドリーな製品を使い始め、ライフスタイルに大きな変化を感じた\n"
                "- 友人たちの当初の懐疑心にもかかわらず、マリアの持続可能性への取り組みは彼らにも影響を与えた\n"
                "### 感情的影響\n"
                "- マリアのストーリーは、小さな変化が個人的にも環境的にも大きな影響を与えることの証\n"
                "### 行動喚起\n"
                "- マリアと何千人もの他の人々と一緒に変化を起こしましょう。今日からEcoLifeでサステナブルな旅を始めよう！"
            ),
            "report": (
                "## EcoLife - 結果\n"
                "### 概要\n"
                "- EcoLifeキャンペーンは、サステナブルな生活を促進することで若年成人の間でブランド認知度と売上を増加させることを目的\n"
                "### 主要指標\n"
                "| **指標**       | **目標** | **実際** | **差異** |\n"
                "|------------------|----------|------------|--------------|\n"
                "| 売上増加   | +15%     | +18%       | +3%          |\n"
                "| ソーシャルメディア到達 | 1M      | 1.2M       | +200K        |\n"
                "### 分析\n"
                "- キャンペーンはソーシャルメディアの強力なエンゲージメントとインフルエンサー提携により売上目標を3%上回った\n"
                "- ソーシャルメディアの到達は期待を超え、効果的なコンテンツ戦略とオーディエンスターゲティングを示唆\n"
                "### 推奨事項\n"
                "- インフルエンサー提携を継続して勢いを維持\n"
                "- サステナビリティに関する教育的な投稿を拡大\n"
                "### 結論\n"
                "- EcoLifeキャンペーンはブランド認知度と売上の増加に成功し、将来の取り組みの強固な基盤を築いた"
            ),
        },
        "health": {
            "report": "**治療X - 臨床レポート:** 臨床試験では、一貫した治療8週間後に症状が70%減少したことを示しています",
            "summary": "# 🩺 治療X - 要約\n📈 **有効性:** 70%\n| 週 | 進捗 |\n| 8    | 70%     |",
            "case": "**患者A - 臨床ケース:** 62歳男性が2週間後に改善",
        },
        "technology": {
            "changelog": "# v3.0 - 更新\n✨ **新機能:**\n- OCR\n🐛 **修正:**\n- エクスポート",
            "proposal": """
                    # プロジェクトX - 技術提案

                    ## はじめに
                    この提案は、データ処理効率を向上させるための自動化されたAPI統合システムの技術的アプローチを概説

                    ## 目的
                    - 目的1: 手動データ入力を50%削減
                    - 目的2: データ処理速度を30%向上

                    ## 技術的アプローチ
                    ソリューションはAPI開発にPythonとFlask、コンテナ化にDocker、オーケストレーションにKubernetesを使用

                    ### 主な機能
                    - 機能1: 複数ソースからの自動データ取り込み
                    - 機能2: リアルタイムデータ検証とエラー処理

                    ## 利点
                    - **効率性**: 手動作業を削減し処理を加速
                    - **拡張性**: 増加するデータ量を容易に処理
                    - **コスト削減**: 反復タスクを自動化

                    ## 実装計画
                    1. **フェーズ1**: API開発とテスト（2週間）
                    2. **フェーズ2**: 展開と既存システムとの統合（3週間）
                    3. **フェーズ3**: 監視と最適化（1週間）

                    ## リスクと緩和
                    - **リスク1**: 展開中のAPIダウンタイム
                    - **緩和**: ローリングアップデート戦略を実装
                    - **リスク2**: データ検証エラー
                    - **緩和**: 自動テストを使用して早期にエラーを捕捉

                    ## 結論
                    この提案は、データ処理を自動化する堅牢なソリューションを提示し、効率性とコスト削減の重要な利点を提供
            """,
            "diagram": "# ユーザー認証 - フロー\n```mermaid\ngraph TD\n  A[開始] --> B{ログイン済み?}\n  B -->|はい| C[ダッシュボード表示]\n  B -->|いいえ| D[ログインにリダイレクト]\n  C --> E[終了]\n  D --> E\n```\n**注釈:**\n- **A**: プロセス開始\n- **B**: 決定点\n- **C/D**: 代替パス\n- **E**: プロセス終了\n**色:**\n- **緑**: 成功パス（例：ユーザーログイン済み）\n- **赤**: 代替パス（例：ユーザーログイン未）\n**凡例:**\n- **四角形**: プロセスステップ\n- **菱形**: 決定点\n- **円**: 開始/終了",
        },
        "education": {
            "guide": "# 📚 [トピック] - ガイド\n## [セクション]\n- **概念:** 実用的な例と応用を含む説明",
            "quick_ref": "**[トピック] - クイックリファレンス:**\n- [キーポイント]: 簡潔で実用的な要約",
            "timeline": "# 🎥 [クラス] - タイムライン\n- **[MM:SS]** [主要な概念または実行されたアクション]: [結果またはアクションの簡潔な説明]",
        },
        "architecture": {
            "chronicle": "# 🏛️ グリーンタワー - 記録\n- **[01:15]** 持続可能な材料",
            "report": "**グリーンタワー - 技術レポート:** 設計は再生可能エネルギーを使用",
            "list": "# グリーンタワー - 詳細\n- **材料:** リサイクル\n- **エネルギー:** 太陽光",
        },
        "finance": {
            "report": "# 💰 2025年Q1 - 財務レポート\n- **収益:** 技術進歩と市場拡大により5%成長",
            "table": "## 2025年Q1 - 財務要約\n| **指標** | **値** |\n|---------------|-----------|\n| 収益       | +5%       |",
            "executive": "**2025年Q1 - エグゼクティブサマリー:** 技術進歩と戦略的市場拡大により5%成長、財務見通しを強化",
        },
        "tourism": {
            "chronicle": "# 🌍 ブルービーチ - 記録\n- **[01:00]** エコツーリズムの取り組みが廃棄物削減に貢献\n- **[05:00]** 主要なエコフレンドリーホテル開発",
            "report": "**ブルービーチ - 政策:** 廃棄物削減とエコツーリズム支援を通じて持続可能性を促進。自治体は2030年までにカーボンニュートラルを目指し、再生可能エネルギーと廃棄物削減に焦点",
            "list": "# ブルービーチ - イニシアチブ\n- **エコロジー:** プラスチック使用削減、リサイクル増加\n- **観光魅力:** 通年アクティビティ、ピークシーズンは5月から9月",
        },
    }

    def get_prompt_base(
        self,
        category: CategoryType,
        style: StyleType,
        output_format: OutputFormatType,
        spec: Any,
        style_info: Any,
    ) -> list[str]:
        return [
            f"# {category.value.title()} - {style.value.title()} 用プロンプト",
            f"**目的:** {output_format.value.upper()}形式でコンテンツを作成し、{category.value.title()}に最適化する",
            f"**スタイル:** {style.value.title()} ({style_info['tone']})",
            f"**基本要件:** {spec.get('needs', 'コンテキストに合わせた適応')}",
            "",
        ]

    def get_mandatory_rules_prompt(self, generator: Any) -> list[str]:
        return [
            "「テキストは繰り返しがなく、明確で一貫しています」のような一般的な表現は避け、具体的で明確なフィードバックに集中してください。",
            "「修正済みのテキストです。冗長性や繰り返しを削除しましたが、すべての詳細と元の構造は保持されています」のような文は含めないでください。",
            "いかなる場合も```markdownタグを使用しないでください。コードブロックを使用する場合は、言語を指定しないか、Markdown以外の言語を使用してください。",
            f"今後、元の質問の言語に関わらず、日本語のみで回答してください。",
        ]

    def get_summary_level_prompt(self, generator: Any, word_limit: str) -> str:
        return f"- 文書を包括的に要約し、主要なテーマ、重要なポイント、および全体の目的を約{word_limit}語で強調してください。"

    async def get_summary_chunk_prompt(
        self, generator: Any, previous_context: str
    ) -> str:
        prompt = f"""
            前のテキストの文脈: {previous_context}\n
            指示: 以下のテキストの詳細な要約を提供し、新しい情報を前の文脈と一貫して統合してください。
            例、説明、学習を助ける詳細も含めてください。
            理解を容易にするために、要約をセクションや主要ポイントに整理してください。"""
        return prompt

    async def get_postprocess_prompt(self, generator: Any) -> str:
        prompt = f"""あなたは、冗長性を削除してテキストを改善する専門編集者です。
            以下の要約を確認し、繰り返しや冗長な情報のみを削除してください。
            テキスト、フレーズ、アイデアの繰り返しなど。
            内容を簡略化、削減、要約することはせず、すべての詳細、データ、重要な要素をそのまま保持してください。
            最終テキストが明確で一貫性があり、構造や元の意味を変えずに整理されていることを確認してください。"""
        return prompt
